!function(B,j){"use strict";var O="position",H="absolute",r="relative",V="px",y="left",C="right",Z="top",K="bottom",A="display",E="none",U="block",w=ht.Default,L=w.getInternal(),R=Math.floor,W=Math.ceil,T=Math.PI,c=null,X=B.parseInt,S=function(x){return x.getContext("2d")},m=function(){return document},v=function(I){return m().createElement(I)},s=function(){return v("canvas")},h=function(h,w,Z){h.style.setProperty(w,Z,c)},n=function(R,L,b){w.def(ht.widget[R],L,b)},F=function(L,w){L.appendChild(w)},I=function(t,M){t.removeChild(M)},z=function(q,t,u,b){q.addEventListener(t,u,!!b)},P=function(j,s,Y,v){j.removeEventListener(s,Y,!!v)};ht.widget.RulerFrame=function(J){var S=this,n=S._view=L.createView(null,S),q=S.$1k=s(),f=S.$2k=s(),E=S.$3k=s(),k=S.$4k=s();S._defaultRulerConfig={size:20,borderWidth:1,borderStyle:"solid",borderColor:"#888",defaultMajorTickSpacing:50,minMajorTickSpacing:10,minPhysicalMajorTickSpacing:40,maxPhysicalMajorTickSpacing:100,tickSpacingAdaptable:!0,majorTickTextFont:"12px Arial",majorTickTextColor:"#666",majorTickColor:"#888",minorTickColor:"#ccc",background:"rgba(0,0,0,0)",guideColor:"rgb(0, 173, 239)",guideWidth:2,guideVisible:!1,guideTipVisible:!1,guideTipBorderColor:"#666",guideTipTextColor:"#666",guideTipTextFont:"12px Arial",guideTipBackground:"#fff"},S._topRulerConfig={visible:!0},S._rightRulerConfig={visible:!1},S._bottomRulerConfig={visible:!1},S._leftRulerConfig={visible:!0},F(n,q),F(n,E),F(n,f),F(n,k),h(n,O,r),h(n,"box-sizing","border-box"),h(n,"-moz-box-sizing","border-box"),h(q,O,H),h(f,O,H),h(E,O,H),h(k,O,H),S.$14k=function(){S.$13k=1,S.iv()},S.$15k=function(j){if(S._topRulerConfig.guideVisible||S._rightRulerConfig.guideVisible||S._bottomRulerConfig.guideVisible||S._leftRulerConfig.guideVisible||S._defaultRulerConfig.guideVisible||(S._topRulerConfig.guideTipVisible||S._rightRulerConfig.guideTipVisible||S._bottomRulerConfig.guideTipVisible||S._leftRulerConfig.guideTipVisible||S._defaultRulerConfig.guideTipVisible)&&S._component){var M=n.getBoundingClientRect();S.$16k={x:j.clientX-M.left,y:j.clientY-M.top},S.$5k()}},S.setComponent(J)},n("RulerFrame",j,{ms_v:1,ms_fire:1,ms_ac:["defaultRulerConfig","topRulerConfig","rightRulerConfig","bottomRulerConfig","leftRulerConfig","component"],setComponent:function(m){var f=this,R=f._component,U=f.getView();if(U){if(f._component=m,f.fp("component",R,m),R){var u=f.getComponentView(R);I(U,u),P(U,"mousemove",f.$15k),f.removeComponentPropertyChangeListener(R,f.$14k)}if(m){var M=f.getComponentView(m);F(U,M),h(M,O,H),z(U,"mousemove",f.$15k),f.addComponentPropertyChangeListener(m,f.$14k)}}},addComponentPropertyChangeListener:function(h,y){h&&h.mp&&h.mp(y)},removeComponentPropertyChangeListener:function(P,X){P&&P.ump&&P.ump(X)},getComponentHZoom:function(S){return S&&S.getZoom?S.getZoom():1},getComponentVZoom:function(H){return H&&H.getZoom?H.getZoom():1},getComponentViewRect:function(U){return U&&U.getViewRect?U.getViewRect():void 0},getComponentView:function(G){return G&&G.getView?G.getView():G},invalidateComponent:function(q){q&&q.iv&&q.iv()},validateComponent:function(t){t&&t.validate&&t.validate()},$7k:function(y,X,Z,z,w,C,o,T,r,J,u,D){if(X.visible){var K=this._defaultRulerConfig,k="borderStyle",d="borderColor",N="borderWidth",g="background",O=X[k]||K[k],i=X[d]||K[d],x=X[N]||K[N],t=X.size!=c?X.size:K.size,l=X[g]||K[g],e=t+x,a=this.$6k(x,O,i,y,Z,w,e,o,T,r,J,u,D);h(y,w,"0px"),C?L.setCanvas(y,z-a,t):L.setCanvas(y,t,z-a),h(y,"background",l),h(y,A,U)}else h(y,A,E),h(this.getComponentView(this._component),w,"0px")},$6k:function(j,N,D,P,o,f,b,k,s,K,_,C,m){var J=0;return h(P,o,j+"px "+N+" "+D),h(this.getComponentView(this._component),f,b+V),k?(h(P,s,K+V),J+=K):h(P,s,"0px"),_?(h(P,C,m+V),J+=m):h(P,C,"0px"),J},validateImpl:function(){var W=this,M=W._component,h=W.$1k,L=W.$2k,s=W.$3k,n=W.$4k,g=W._view,w=W._defaultRulerConfig,U=W._topRulerConfig,u=W._rightRulerConfig,D=W._bottomRulerConfig,A=W._leftRulerConfig,$=w.size;if(g&&M){var I=U.size!=c?U.size:$,d=u.size!=c?u.size:$,j=D.size!=c?D.size:$,E=A.size!=c?A.size:$;W.$7k(h,U,"border-bottom",g.offsetWidth,Z,!0,A.visible,y,E,u.visible,C,d),W.$7k(L,u,"border-left",g.offsetHeight,C,!1,U.visible,Z,I,D.visible,K,j),W.$7k(s,D,"border-top",g.offsetWidth,K,!0,A.visible,y,E,u.visible,C,d),W.$7k(n,A,"border-right",g.offsetHeight,y,!1,U.visible,Z,I,D.visible,K,j),W.$13k?delete W.$13k:W.invalidateComponent(M),W.validateComponent(M),W.$5k()}},$5k:function(){function K(D,Q,K,V,d,w){if(Q.visible){var Z=S(D),A=Q[u]||W,C=Q[k]!=c?Q[k]:$,B=Q[v]||b,R=Q[G]||L,t=Q.size!=c?Q.size:T,kd=Q[e]||M,hr=Q[h]||l,zr=Q[j]||s,nj=Q[m]!=c?Q[m]:_,_h=Q[o]!=c?Q[o]:H,Pf=Q[n]!=c?Q[n]:i,Lk=Q[I]!=c?Q[I]:x,te=Q[U]!=c?Q[U]:a,ln=Q[r]!=c?Q[r]:P,hn=Q[f]||_o,Kl=Q[O]||ip;C&&(A=z[w]=z.$8k(z[w]||A,Q[E]||N,Q[J]||y,V?g:Y,hr)),K.call(z,Z,q,F,X,p,t,V?g:Y,A,B,R,d,kd,zr);var Nc=z.$16k;(nj||_h)&&Nc&&(V?z.$9k(Z,Nc.x,t,hn,Kl,nj,_h,Pf,Lk,te,ln):z.$10k(Z,Nc.y,t,hn,Kl,nj,_h,Pf,Lk,te,ln,d))}}var z=this,D=z.$1k,A=z.$2k,t=z.$3k,R=z.$4k,d=z._topRulerConfig,B=z._rightRulerConfig,Q=z._bottomRulerConfig,V=z._leftRulerConfig,w=z._defaultRulerConfig,Z=z._component,C=z.getComponentViewRect(Z),g=z.getComponentHZoom(Z),Y=z.getComponentVZoom(Z),q=C.x*g,X=q+C.width*g,F=C.y*Y,p=F+C.height*Y,T=z._defaultRulerConfig.size,u="defaultMajorTickSpacing",E="maxPhysicalMajorTickSpacing",J="minPhysicalMajorTickSpacing",k="tickSpacingAdaptable",v="majorTickTextFont",G="majorTickTextColor",e="majorTickColor",j="minorTickColor",m="guideVisible",o="guideTipVisible",n="guideTipBorderColor",I="guideTipTextColor",U="guideTipTextFont",r="guideTipBackground",f="guideColor",O="guideWidth",h="minMajorTickSpacing",W=w[u],N=w[E],y=w[J],$=w[k],b=w[v],L=w[G],M=w[e],l=w[h],s=w[j],_=w[m],H=w[o],i=w[n],x=w[I],a=w[U],P=w[r],_o=w[f],ip=w[O];z._view&&Z&&(K(D,d,z.$11k,!0,!1,"_currentTopMajorTickSpacing"),K(A,B,z.$12k,!1,!0,"_currentRightMajorTickSpacing"),K(t,Q,z.$11k,!0,!0,"_currentBottomMajorTickSpacing"),K(R,V,z.$12k,!1,!1,"_currenLeftMajorTickSpacing"))},$8k:function(_,d,K,B,f){return K>_*B?_=R(d/B/f)*f:_*B>d&&(_=W(K/B/f)*f),_},getHTipText:function(b){var Y=this,C=Y._component,j=0,m=Y._view.getBoundingClientRect();return C.lp?j=X(C.lp({clientX:b.x+m.left,clientY:b.y}).x):j-=X(this.getComponentView(C).style.left)||0,j},$9k:function(I,D,z,B,e,x,t,u,O,j,Z){var S=this,c=S._component;I.save(),L.translateAndScale(I,0,0,1);var i=D-(X(this.getComponentView(c).style.left)||0),q=0;if(D=S.getHTipText(S.$16k),x&&(I.beginPath(),I.fillStyle=B,I.rect(i,q,e,z),I.fill()),t){I.beginPath(),I.textAlign="center",I.textBaseline="middle",I.font=j;var W=I.measureText(D).width+6;I.fillStyle=Z,I.rect(i-W/2,q,W,z),I.fill(),I.strokeStyle=u,I.stroke(),I.beginPath(),I.fillStyle=O,I.fillText(D,i,q+z/2)}I.restore()},getVTipText:function(Q){var e=this,F=e._component,d=0,p=e._view.getBoundingClientRect();return F.lp?d=X(F.lp({clientX:Q.x,clientY:Q.y+p.top}).y):d-=X(this.getComponentView(F).style.top)||0,d},formatScaleText:function(J){return Math.round(J)},$10k:function(I,V,R,G,z,N,h,w,A,J,b,v){var d=this,l=d._component;I.save(),L.translateAndScale(I,0,0,1);var m=R/2,k=V-(X(this.getComponentView(l).style.top)||0);if(V=d.getVTipText(d.$16k),N&&(I.beginPath(),I.fillStyle=G,I.rect(m-R/2,k,R,z),I.fill()),h){I.translate(m,k),I.rotate((v?90:-90)*T/180),I.translate(-m,-k),I.beginPath(),I.textAlign="center",I.textBaseline="middle",I.font=J;var q=I.measureText(V).width+6;I.fillStyle=b,I.rect(m-q/2,k-R/2,q,R),I.fill(),I.strokeStyle=w,I.stroke(),I.fillStyle=A,I.fillText(V,m,k)}I.restore()},$11k:function(t,O,o,C,B,M,i,z,I,V,l,P,m){t.save(),o=0;var A=O,n=C,e=(A+n)/2;O=0,C=n-A,L.translateAndScale(t,0,0,1);var N=0,K=0,f=X(M/2),k=M-f,H=l?0:f,p=z*i,U=p/10;O-=p,C+=p,t.clearRect(O,0,C-O,M),t.beginPath(),t.fillStyle=m;var s=R(e/U)*U-A;for(N=s;C>N;N+=U)t.rect(N,o+H,1,k);for(N=s;N>O;N-=U)t.rect(N,o+H,1,k);for(t.fill(),H=l?0:1,t.beginPath(),t.fillStyle=P,s=R(e/p)*p-A,N=s;C>N;N+=p)t.rect(N,o+H,1,M-1);for(N=s;N>O;N-=p)t.rect(N,o+H,1,M-1);t.fill();var Q=X(/\d+px/.exec(I)[0]),F=(Q||10)/2;t.textBaseline="middle",H=l?M-F-2:F+2,t.beginPath(),t.fillStyle=V,t.font=I;var u=R(e/p)*p/i;for(N=s,K=u;C>N;N+=p,K+=z){var E=this.getHScaleText?this.getHScaleText(N):K;t.fillText(this.formatScaleText(E),N+2,o+H)}for(N=s,K=u;N>O;N-=p,K-=z){var E=this.getHScaleText?this.getHScaleText(N):K;t.fillText(this.formatScaleText(E),N+2,o+H)}t.restore()},$12k:function(H,z,q,W,I,_,n,A,B,Y,O,t,p){function i(x,s,g,t,n,J){n=D.getVScaleText?D.getVScaleText(g):n,n=D.formatScaleText(n),H.translate(x+s,g),H.rotate(-t),H.translate(-x-s,-g),H.fillText(n,x+s+(J?2:1),g),H.translate(x+s,g),H.rotate(t),H.translate(-x-s,-g)}H.save(),z=0;var r=q,J=I,C=(r+J)/2;q=0,I=J-r,L.translateAndScale(H,0,0,1);var u=0,D=this,M=0,Q=X(_/2),k=_-Q,P=O?0:Q,b=A*n,c=b/10;q-=b,I+=b,H.clearRect(z,0,_,I-q),H.beginPath(),H.fillStyle=p;var h=R(C/c)*c-r;for(u=h;I>u;u+=c)H.rect(z+P,u,k,1);for(u=h;u>q;u-=c)H.rect(z+P,u,k,1);for(H.fill(),P=O?0:1,H.beginPath(),H.fillStyle=t,h=R(C/b)*b-r,u=h;I>u;u+=b)H.rect(z+P,u,_-1,1);for(u=h;u>q;u-=b)H.rect(z+P,u,_-1,1);H.fill();var U=X(/\d+px/.exec(B)[0]),S=(U||10)/2,d=90*T/180;H.textBaseline="middle",P=O?_-S:S+2,d=O?-d:d,H.beginPath(),H.fillStyle=Y,H.font=B;var m=R(C/b)*b/n;for(u=h,M=m;I>u;u+=b,M+=A)i(z,P,u,d,M,O);for(u=h,M=m;u>q;u-=b,M-=A)i(z,P,u,d,M,O);H.restore()},onPropertyChanged:function(){this.iv()},dispose:function(){var _=this,F=_._component,$=_._view;F&&_.removeComponentPropertyChangeListener(F,_.$14k),$&&(P($,"mousemove",_.$15k),I($.parentNode,$),_._view=null)}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);