!function(U,Y){"use strict";var f="ht",t=U[f],_="innerHTML",W="className",E=null,n="px",X=t.Default,D=X.getInternal(),L="0",v=function(){return document},H=function(N){return v().createElement(N)},C=function(){return H("canvas")},j=function(Q,J,Z){Q.style.setProperty(J,Z,E)},b=function(n,w,_){X.def(t.widget[n],w,_)},c=function(f,v){f.appendChild(v)},u=function(G,u){G.removeChild(u)},k=function(q,R,I,D){q.addEventListener(R,I,!!D)},d=function(g,y,q,A){g.removeEventListener(y,q,!!A)},y=X.isTouchable;D.addMethod(X,{menuLabelFont:(y?"16":"13")+"px arial, sans-serif",menuLabelColor:"#000",menuBackground:"#F0EFEE",menuHoverBackground:"#648BFE",menuHoverLabelColor:"#fff",menuSeparatorWidth:1,menuSeparatorColor:"#999"},!0),t.widget.Menu=function(Z){var h=this,Y=h._view=D.createView(null,h),p=h.$1g=new t.widget.ContextMenu,r=H("ul");p._r=!0,p._view[W]+=" ht-widget-dropdownmenu",Y[W]="ht-widget-menu",r[W]="header",j(Y,"margin",L),j(Y,"padding",L),j(Y,"background",X.menuBackground),j(Y,"-webkit-user-select","none"),j(Y,"-moz-user-select","none"),j(Y,"user-select","none"),j(Y,"text-align","left"),j(Y,"border-bottom",X.menuSeparatorWidth+"px solid "+X.menuSeparatorColor),j(Y,"cursor","default"),j(Y,"overflow","auto"),j(Y,"white-space","nowrap"),j(Y,"font",X.menuLabelFont),j(Y,"color",X.menuLabelColor),j(Y,"box-sizing","border-box"),j(Y,"-moz-box-sizing","border-box"),j(r,"list-style","none"),j(r,"margin",L),j(r,"padding",L),j(r,"display","inline-block"),c(Y,r),h.setItems(Z),h.$2g=function(d){h.$3g(d)},h.$4g=function(S){h.$5g(S)},h.$6g=function(C){h.$7g(C)},h.$8g=function(X){h.$9g(X)},h.$9b=function(W){h.$10g(W)},h._autoShow=!0,h.setAutoShow(!1),p.afterHide=function(){h.$11g()},p.afterShow=function(){h.$12g()},d(v(),"keydown",p.$3b),h.$3b=function(L){h.$13g(L)},h.invalidate()},b("Menu",Y,{_items:E,$14g:X.menuHoverBackground,$15g:X.menuHoverLabelColor,$16g:{},_enableGlobalKey:!1,ms_v:1,$21g:"smallicons",$22g:0,$23g:0,$24g:"left",getDropDownMenu:function(){return this.$1g},setLayout:function(J){var k=this;if(k.$21g=J,k.setItems(k._items),"largeicons"===J){for(var o=k._view.querySelectorAll(".header-item"),g=0,Y=0;Y<o.length;Y++){var S=o[Y];g=Math.max(g,S.clientWidth)}for(var Y=0;Y<o.length;Y++){var S=o[Y];j(S,"min-width",g+n)}}this.invalidate()},getLayout:function(){return this.$21g},setHeaderItemHGap:function(t){this.$22g=t;for(var I=this._view.querySelectorAll(".header-item"),q=0;q<I.length;q++){var G=I[q];j(G,"margin-left",t+n),j(G,"margin-right",t+n)}},getHeaderItemHGap:function(){return this.$22g},setHeaderItemVGap:function(e){this.$23g=e;for(var k=this._view.querySelectorAll(".header-item"),v=0;v<k.length;v++){var Y=k[v];j(Y,"margin-top",e+n),j(Y,"margin-bottom",e+n)}},getHeaderItemVGap:function(){return this.$24g},setHeaderItemAlign:function(C){this.$24g=C,j(this._view,"text-align",C)},getHeaderItemAlign:function(){return this.$23g},enableGlobalKey:function(){var x=this,m=x._enableGlobalKey;m===!1&&(k(v(),"keydown",x.$3b),x._enableGlobalKey=!0)},disableGlobalKey:function(){this._enableGlobalKey=!1,d(v(),"keydown",this.$3b)},setHoverBackground:function(o){this.$14g=o},setHoverColor:function(x){this.$15g=x},setItems:function(q){var b=this,g=b._view,M=b.$21g;if(b._items=q,g.children[0][_]="",b.$16g={},q&&q.length){for(var o=g.children[0],$=0,k=v().createDocumentFragment();$<q.length;$++){var U=q[$],E=H("li"),l=H("span");if(U.icon){var V=C();V[W]="menu-item-icon","smallicons"===M?(j(V,"height","1.2em"),j(V,"width","1.2em"),j(V,"vertical-align","middle")):(j(V,"height","32px"),j(V,"width","32px"),j(V,"display","block"),j(V,"margin","0 auto")),V.$20g=U.icon,c(E,V)}E[W]="header-item",j(E,"display","inline-block"),j(E,"vertical-align","top"),j(E,"padding","0 1.2em"),j(E,"line-height","1.8em"),"largeicons"===M&&j(E,"text-align","center"),j(E,"background-color","rgba(0,0,0,0)"),E.setAttribute("data-index",$),b.$16g[$]=U.items,l[_]=U.label,"iconsonly"!==M&&c(E,l),c(k,E)}c(o,k)}},showDropdownMenu:function(F){var c=this,P=c.$16g[F],g=c.$1g,z=c._view.children[0].children[F],h=c.$17g;if(z&&z!==h){h&&c.hideDropdownMenu();var Y=z.getBoundingClientRect(),f=X.getWindowInfo();c.$17g=z,g.setItems(P),g.show(Y.left+f.left,Y.top+Y.height+f.top,!1)}},hideDropdownMenu:function(){this.$1g.hide()},getItemByProperty:function(a,J){var m=this,q=m._items;return q&&0!==q.length?m.$1g.getItemByProperty(a,J,q):E},$12g:function(){var Y=this,U=Y.$17g;U.style.background=Y.$14g,U.style.color=Y.$15g,Y._autoShow||k(v(),y?"touchstart":"mousedown",Y.$9b)},$11g:function(){var k=this,h=k.$17g;h&&(h.style.background="",h.style.color="",k.$17g=E),d(v(),y?"touchstart":"mousedown",k.$9b)},$10g:function(i){var r=this,m=r._view,Q=r.$1g,f=m.children[0];!v().body.contains(m)||f.contains(i.target)||Q._view.contains(i.target)||r.hideDropdownMenu()},$13g:function(Q){var m=this,I=m.$1g;v().body.contains(m._view)&&I.$13b.$4b.call(I.$13b,Q,m._items)},setAutoShow:function(E){var r=this,e=r.$1g,u=r._view;r._autoShow!==E&&(r._autoShow?(d(u,"mouseover",r.$2g),d(u,"mouseout",r.$4g),d(e._view,"mouseout",r.$4g),y||(k(u,"mouseover",r.$8g),k(u,"mouseout",r.$8g)),k(u,y?"touchstart":"mousedown",r.$6g)):(d(u,"mouseover",r.$8g),d(u,"mouseout",r.$8g),d(u,y?"touchstart":"mousedown",r.$6g),d(v(),y?"touchstart":"mousedown",r.$9b),y||(k(u,"mouseover",r.$2g),k(u,"mouseout",r.$4g),k(e._view,"mouseout",r.$4g))),r._autoShow=E)},$3g:function(b){var T=this,I=T._view.children[0],O=b.target;if(I!==O&&I.contains(O)){for(;"header-item"!==O[W];)O=O.parentNode;T.showDropdownMenu(O.getAttribute("data-index"))}},$5g:function(y){var b=this,J=b._view.children[0],r=b.$1g,O=y.target,M=y.relatedTarget;!J.contains(O)&&!r._view.contains(O)||J.contains(M)||r._view.contains(M)||b.hideDropdownMenu()},$7g:function(O){O.preventDefault();var p=this,Q=p._view.children[0],H=p.$1g,s=O.target;if(X.isLeftButton(O)&&Q!==s&&Q.contains(s))if(y){for(;"header-item"!==s[W];)s=s.parentNode;var N=s.getAttribute("data-index"),H=p.$1g,t=p._view.children[0].children[N],C=p.$17g;H.isShowing()&&p.hideDropdownMenu(),t!==C&&p.showDropdownMenu(N)}else if(H.isShowing())p.hideDropdownMenu();else{for(;"header-item"!==s[W];)s=s.parentNode;p.showDropdownMenu(s.getAttribute("data-index"))}},$9g:function(U){var $=this,A=$._view,D=$.$1g,i=U.target;if(A.contains(i)){for(var R=A.querySelectorAll(".header-item"),L=E,x=0;x<R.length;x++){var z=R[x];z.style.background="",z.style.color="","mouseover"===U.type?z.contains(i)&&(L=z):"mouseout"===U.type&&D.isShowing()&&$.$17g===z&&(L=z)}D.isShowing()&&(L||(L=$.$17g),$.showDropdownMenu(L.getAttribute("data-index"))),L&&(L.style.background=$.$14g,L.style.color=$.$15g)}},getShowingMenuIndex:function(){var g=this.$17g;return g?g.getAttribute("data-index"):-1},addTo:function(L){var f=this,w=f._view;c(L,w),f.invalidate()},dispose:function(){var K=this,W=K._view,Y=K.$1g;W&&(K._autoShow?(d(W,"mouseover",K.$2g),d(W,"mouseout",K.$4g),d(Y._view,"mouseout",K.$4g)):(d(W,"mouseover",K.$8g),d(W,"mouseout",K.$8g),d(W,y?"touchstart":"mousedown",K.$6g),d(v(),y?"touchstart":"mousedown",K.$9b)),d(v(),"keydown",K.$3b),Y.dispose(),W.parentNode&&u(W.parentNode,W),K._view=K.$1g=K.$16g=K._items=K.$17g=K.$2g=K.$4g=K.$6g=K.$8g=K.$9b=K.$3b=E)},$19g:function(f,z,Z,J){var T=D.initContext(f);D.translateAndScale(T,0,0,1),T.clearRect(0,0,Z,J),X.drawStretchImage(T,X.getImage(z),"fill",0,0,Z,J),T.restore()},validateImpl:function(){var E,P,M,x=this,T=x._view,Q=T.querySelectorAll(".menu-item-icon");for(M=0;M<Q.length;M++){var W=Q[M];E=W.clientWidth,P=W.clientHeight,E&&P&&(D.setCanvas(W,E,P),x.$19g(W,X.getImage(W.$20g),E,P))}}})}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);